ihsan@ihsan-pc:~/Desktop/Ledgerly$ dotnet run --project src/Ledgerly.Api/Ledgerly.Api.csproj
Building...
[07:25:14 INF] Starting Ledgerly API {"Application": "Ledgerly"}
/home/ihsan/Desktop/Ledgerly/src/Ledgerly.Api/bin/Debug/net8.0/runtimes/win-x64/native/e_sqlite3.dll
/home/ihsan/Desktop/Ledgerly/src/Ledgerly.Api/bin/Debug/net8.0/runtimes/win-x86/native/e_sqlite3.dll
/home/ihsan/Desktop/Ledgerly/src/Ledgerly.Api/bin/Debug/net8.0/runtimes/win-arm64/native/e_sqlite3.dll
/home/ihsan/Desktop/Ledgerly/src/Ledgerly.Api/bin/Debug/net8.0/runtimes/win-arm/native/e_sqlite3.dll
[07:25:15 INF] Database migrations applied successfully {"Application": "Ledgerly"}
[07:25:15 INF] Exporting Open Telemetry metrics from Wolverine with name Wolverine:Ledgerly.Api, version 3.0.0.0 {"SourceContext": "Wolverine.Runtime.WolverineRuntime", "Application": "Ledgerly"}
[07:25:15 INF] Found 10 Wolverine HTTP endpoints in assemblys Ledgerly.Api, Ledgerly.Api {"SourceContext": "Wolverine.Http.HttpGraph", "Application": "Ledgerly"}
[07:25:15 INF] Starting Wolverine messaging for application assembly Ledgerly.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null {"SourceContext": "Wolverine.Runtime.WolverineRuntime", "Application": "Ledgerly"}
[07:25:15 INF] The Wolverine code generation mode is Dynamic. This is suitable for development, but you may want to opt into other options for production usage to reduce start up time and resource utilization. {"SourceContext": "Wolverine.Runtime.WolverineRuntime", "Application": "Ledgerly"}
[07:25:15 INF] See https://wolverine.netlify.app/guide/codegen.html for more information {"SourceContext": "Wolverine.Runtime.WolverineRuntime", "Application": "Ledgerly"}
[07:25:15 INF] Searching assembly Ledgerly.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null for Wolverine message handlers {"SourceContext": "Wolverine.Configuration.HandlerDiscovery", "Application": "Ledgerly"}
[07:25:15 INF] Searching assembly Ledgerly.Api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null for Wolverine message handlers {"SourceContext": "Wolverine.Configuration.HandlerDiscovery", "Application": "Ledgerly"}
[07:25:15 INF] Wolverine assigned node id for envelope persistence is -1864686669 {"SourceContext": "Wolverine.Runtime.WolverineRuntime", "Application": "Ledgerly"}
[07:28:38 INF] Executing GetBalanceQuery. AccountFilter: null {"SourceContext": "Ledgerly.Api.Features.GetBalance.GetBalanceHandler", "RequestId": "0HNGKC53I1BJE:00000002", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "3107850e-a925-4d02-9e88-c3b48857db53", "Application": "Ledgerly"}
[07:28:38 INF] hledger version verified: 1.32.3 {"SourceContext": "Ledgerly.Api.Common.Hledger.HledgerBinaryManager", "RequestId": "0HNGKC53I1BJE:00000002", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "3107850e-a925-4d02-9e88-c3b48857db53", "Application": "Ledgerly"}
[07:28:38 INF] hledger binary ready at /home/ihsan/.local/share/Ledgerly/bin/hledger-linux-x64 {"SourceContext": "Ledgerly.Api.Common.Hledger.HledgerBinaryManager", "RequestId": "0HNGKC53I1BJE:00000002", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "3107850e-a925-4d02-9e88-c3b48857db53", "Application": "Ledgerly"}
[07:28:38 INF] GetBalanceQuery completed with 4 root accounts {"SourceContext": "Ledgerly.Api.Features.GetBalance.GetBalanceHandler", "RequestId": "0HNGKC53I1BJE:00000002", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "3107850e-a925-4d02-9e88-c3b48857db53", "Application": "Ledgerly"}
[07:28:38 INF] HTTP GET /api/balance responded 200 in 1525.6222 ms {"SourceContext": "Serilog.AspNetCore.RequestLoggingMiddleware", "CorrelationId": "3107850e-a925-4d02-9e88-c3b48857db53", "RequestId": "0HNGKC53I1BJE:00000002", "ConnectionId": "0HNGKC53I1BJE", "Application": "Ledgerly"}
[07:28:43 INF] Executing GetBalanceQuery. AccountFilter: null {"SourceContext": "Ledgerly.Api.Features.GetBalance.GetBalanceHandler", "RequestId": "0HNGKC53I1BJE:00000004", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "d2d0db2b-6e7a-4f37-b2f2-fa7c18270d8b", "Application": "Ledgerly"}
[07:28:43 INF] GetBalanceQuery completed with 4 root accounts {"SourceContext": "Ledgerly.Api.Features.GetBalance.GetBalanceHandler", "RequestId": "0HNGKC53I1BJE:00000004", "RequestPath": "/api/balance", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "d2d0db2b-6e7a-4f37-b2f2-fa7c18270d8b", "Application": "Ledgerly"}
[07:28:43 INF] HTTP GET /api/balance responded 200 in 23.9010 ms {"SourceContext": "Serilog.AspNetCore.RequestLoggingMiddleware", "CorrelationId": "d2d0db2b-6e7a-4f37-b2f2-fa7c18270d8b", "RequestId": "0HNGKC53I1BJE:00000004", "ConnectionId": "0HNGKC53I1BJE", "Application": "Ledgerly"}
[07:28:54 INF] Processing PreviewCsvCommand. FileName: duplicate-test.csv, FileSize: 472 {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Starting CSV parse for file: duplicate-test.csv {"SourceContext": "Ledgerly.Api.Features.ImportCsv.CsvParserService", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV parse completed. Rows: 10, Headers: 5, Errors: 0 {"SourceContext": "Ledgerly.Api.Features.ImportCsv.CsvParserService", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Starting column detection. HeaderCount: 5, SampleRowCount: 10 {"SourceContext": "Ledgerly.Api.Features.ImportCsv.ColumnDetectionService", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Column detection completed. DetectedColumns: 3, AllRequiredFieldsDetected: True {"SourceContext": "Ledgerly.Api.Features.ImportCsv.ColumnDetectionService", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Column mappings: date=Date, payee=(null), description=Payee, amount=Amount {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Parsed 10 transactions from 10 CSV rows for duplicate detection {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Detecting duplicates for 10 transactions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/15/2025 00:00:00, Payee=Target, Amount=50.00, ComputedHash=tgGqls3qgBpKcp6zWxX7Z3Yy8IBy11TVm5LBP0krD2A= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/15/2025 00:00:00, Payee=Target, Amount=50.00, ComputedHash=tgGqls3qgBpKcp6zWxX7Z3Yy8IBy11TVm5LBP0krD2A= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/16/2025 00:00:00, Payee=Walmart, Amount=75.50, ComputedHash=47+3cWsOPsWkIksbB4/6JB0ZSG555kAN8st7z/wVYxA= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/16/2025 00:00:00, Payee=Walmart, Amount=75.50, ComputedHash=47+3cWsOPsWkIksbB4/6JB0ZSG555kAN8st7z/wVYxA= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/17/2025 00:00:00, Payee=Starbucks, Amount=5.50, ComputedHash=hp2fCntL+I5olKCY73CKB8K6FTfcr64HGFIEEYzhJrk= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/17/2025 00:00:00, Payee=Starbucks, Amount=5.49, ComputedHash=gK7bitsd7krGjhyeRl588zg0Z+HvNQAk/MJnO7VaHOg= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/18/2025 00:00:00, Payee=Amazon, Amount=99.99, ComputedHash=1JLgan5z7U9UTmUsxlVd72URVlC/0dCuWoUZOmaOsN0= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/18/2025 00:00:00, Payee=Amazon, Amount=99.99, ComputedHash=1JLgan5z7U9UTmUsxlVd72URVlC/0dCuWoUZOmaOsN0= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/19/2025 00:00:00, Payee=Shell Gas, Amount=45.00, ComputedHash=7xnG21i67bhnmNZG9DfFm53j8DNFtL6kJWTwW45NtCc= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV Transaction: Date=01/20/2025 00:00:00, Payee=Chipotle, Amount=12.50, ComputedHash=pkBOrICMBnqi+OduB5M1JGkdPm9cMDZ9JXsoXNnivwQ= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Found 3 existing transactions in database matching 10 hashes {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] DB Transaction: Date=01/18/2025 00:00:00, Payee=Amazon, Amount=99.99, Hash=1JLgan5z7U9UTmUsxlVd72URVlC/0dCuWoUZOmaOsN0= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] DB Transaction: Date=01/18/2025 00:00:00, Payee=Amazon, Amount=99.99, Hash=1JLgan5z7U9UTmUsxlVd72URVlC/0dCuWoUZOmaOsN0= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] DB Transaction: Date=01/17/2025 00:00:00, Payee=Starbucks, Amount=5.49, Hash=gK7bitsd7krGjhyeRl588zg0Z+HvNQAk/MJnO7VaHOg= {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Duplicate detection complete. Found 3 duplicates out of 10 transactions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.DetectDuplicatesHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Duplicate detection found 3 duplicates out of 10 transactions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Getting category suggestions for 10 transactions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.GetCategorySuggestionsHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 WRN] No active ImportRules found for category suggestions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.GetCategorySuggestionsHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] Category suggestion found 0 suggestions out of 10 transactions {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] CSV preview completed. Duration: 613.2965ms, Rows: 10, Errors: 0, ColumnsDetected: 3, RequiresManualMapping: False, Duplicates: 3, Suggestions: 0 {"SourceContext": "Ledgerly.Api.Features.ImportCsv.PreviewCsvHandler", "RequestId": "0HNGKC53I1BJE:00000006", "RequestPath": "/api/import/preview", "ConnectionId": "0HNGKC53I1BJE", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "Application": "Ledgerly"}
[07:28:54 INF] HTTP POST /api/import/preview responded 200 in 975.2753 ms {"SourceContext": "Serilog.AspNetCore.RequestLoggingMiddleware", "CorrelationId": "9c90d1f9-fbe7-49c6-821c-b7d76799cf75", "RequestId": "0HNGKC53I1BJE:00000006", "ConnectionId": "0HNGKC53I1BJE", "Application": "Ledgerly"}
